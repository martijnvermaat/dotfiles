#!/bin/sh

# Synchronize backup on Dreamhost Backup account with local data
#
# To run periodically from a scheduler like cron, for example:
#
#   $ crontab -l
#   # Synchronize Dreamhost backup service
#   30 03 * * * ~/bin/sync-dreamhost-backup >> /var/log/sync-dreamhost-backup 2>&1
#
# Copyright (c) 2008, Martijn Vermaat

BACKUP_SERVER=backup.dreamhost.com
BACKUP_USER=b292235
BACKUP_DIR=~/priscilla

echo
echo "$(/bin/date)   Starting synchronizing Dreamhost backup"

echo "$(/bin/date)   Synchronizing /home/martijn/music"

# Synchronize music collection
/usr/bin/rsync --protocol=29 -e ssh -za --delete /home/martijn/music/ $BACKUP_USER@$BACKUP_SERVER:$BACKUP_DIR/music

echo "$(/bin/date)   Synchronizing /home/martijn/Photos"

# Synchronize photo collection
/usr/bin/rsync --protocol=29 -e ssh -za --delete /home/martijn/Photos/ $BACKUP_USER@$BACKUP_SERVER:$BACKUP_DIR/photos

echo "$(/bin/date)   Finished synchronizing Dreamhost backup"
